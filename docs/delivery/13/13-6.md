# [13-6] Build frontend metadata display components

[Back to task list](./tasks.md)

## Description

Create React components to display environment metadata and service build configurations in the UI. This provides visibility into how environments were created and serves as foundation for future cloning workflows (PBI 15).

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-10-03 00:00:00 | Created | N/A | Proposed | Task file created | AI Agent |

## Requirements

1. Create metadata display component for environment detail/project view
2. Show key information about how environment was created:
   - Source repository or docker image
   - Discovered services that were deployed
   - Configuration used (env vars, TTL, etc.)
3. Display service build configuration in service views
4. Add "Save as Template" button for future use
5. Handle missing metadata gracefully (old environments)
6. Keep UI simple and informative

## Implementation Plan

1. Create `EnvironmentMetadata.tsx` component:
   - Fetch metadata from API when viewing environment
   - Display wizard inputs in organized sections:
     - Source (repo URL/branch or image details)
     - Services deployed (names, Dockerfile paths)
     - Configuration (environment type, TTL)
   - Collapsible/expandable for space efficiency
   - Handle loading and error states
2. Create `ServiceBuildInfo.tsx` component:
   - Display service-specific build configuration
   - Show Dockerfile path, build context
   - List build arguments if present
   - Show exposed ports
   - Display image details for image-based services
3. Update project detail page or create environment detail page:
   - Add metadata display section
   - Show service list with build info
   - Add "Save as Template" button (non-functional for now, PBI 15)
4. Add API client functions in `web/src/lib/api/railway.ts`:
   - `getEnvironmentMetadata(envId: string)`
   - `getEnvironmentServices(envId: string)`
5. Create React hooks if needed for data fetching

## Verification

- Metadata component displays all captured wizard inputs
- Service build info shows complete configuration
- Missing metadata displays appropriate message
- UI is responsive and well-organized
- Loading and error states work correctly

## Test Plan

**Objective**: Verify metadata display components render correctly

**Test Scope**: Frontend component rendering

**Key Test Scenarios**:
1. Display environment metadata for repo-based environment
2. Display environment metadata for image-based environment
3. Show service build configuration with Dockerfile path
4. Show service configuration for image-based service
5. Handle environments without metadata gracefully
6. Loading states display correctly
7. Error states provide clear feedback

**Success Criteria**:
- All metadata fields display correctly
- UI is intuitive and readable
- Empty/missing states handled well
- Components are performant
- Responsive design works on different screen sizes

## Files Modified

- `web/src/components/environment/EnvironmentMetadata.tsx` - New component
- `web/src/components/environment/ServiceBuildInfo.tsx` - New component
- `web/src/components/project/project-detail.tsx` - Add metadata display
- `web/src/lib/api/railway.ts` - Add API client functions
- `web/src/hooks/useEnvironmentMetadata.ts` - New hook for data fetching (optional)
