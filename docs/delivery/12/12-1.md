# [12-1] Research Railway API for service variables and Dockerfile path configuration

[Back to task list](./tasks.md)

## Description
Research and document how to set `RAILWAY_DOCKERFILE_PATH` and other service variables through the Railway GraphQL API. This will inform how we extend our service creation to support custom Dockerfile paths in monorepo subdirectories.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-10-01 00:00:00 | Created | N/A | Proposed | Task file created | AI Agent |
| 2025-10-01 00:00:00 | Status Update | Proposed | InProgress | Starting research on Railway API | AI Agent |
| 2025-10-01 00:00:00 | Status Update | InProgress | Review | Research completed, guide document created | AI Agent |
| 2025-10-01 00:00:00 | Status Update | Review | Done | Guide approved and ready for implementation | sean |

## Requirements

1. Research Railway GraphQL API documentation for setting service-level variables
2. Document the mutation/query structure for:
   - Setting variables during service creation (`serviceCreate`)
   - Updating variables on existing services (`variableUpsert` or similar)
3. Specifically document `RAILWAY_DOCKERFILE_PATH` behavior:
   - How to specify relative paths from repo root
   - Whether the path is to the Dockerfile itself or its directory
   - Build context implications
4. Document any other relevant Railway builder variables:
   - `RAILWAY_DOCKERFILE_BUILD_CONTEXT` (if exists)
   - Build argument passing mechanisms
5. Document authentication and error handling patterns
6. Create reference guide document for implementation tasks

## Implementation Plan

1. Use web search to find Railway GraphQL API documentation for:
   - Service variable management
   - Dockerfile configuration
   - Build settings
2. Review Railway's public documentation on Docker builds
3. Test queries/mutations using Railway's GraphQL playground if needed
4. Document findings in `12-1-railway-variables-guide.md`
5. Include code examples and mutation structures
6. Document edge cases and limitations

## Verification

- [ ] Guide document created with date stamp and source links
- [ ] Mutation structures documented with all required fields
- [ ] `RAILWAY_DOCKERFILE_PATH` variable usage clearly explained
- [ ] Examples provided for setting variables during service creation
- [ ] Examples provided for updating variables on existing services
- [ ] Error handling patterns documented
- [ ] Path format requirements clearly specified (relative vs absolute)

## Test Plan

This is a research task with documentation deliverables. Success criteria:
- Complete guide document exists
- All API structures are documented with examples
- Guide includes working mutation examples for setting RAILWAY_DOCKERFILE_PATH

## Files Modified

- `docs/delivery/12/12-1-railway-variables-guide.md` (new) - Created comprehensive guide with:
  - `serviceCreate` mutation structure with variables
  - `RAILWAY_DOCKERFILE_PATH` specification and path format requirements
  - Go implementation patterns
  - Build context behavior documentation
  - Error handling guidance
  - Testing examples

