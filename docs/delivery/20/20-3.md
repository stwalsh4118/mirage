# [20-3] Create documentation navigation and sidebar

[Back to task list](./tasks.md)

## Description
Build a navigation sidebar component that displays the documentation structure with collapsible sections, page links, and breadcrumbs. The navigation should make it easy to browse and understand the documentation hierarchy.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-10-10 12:00:00 | Created | N/A | Proposed | Task file created | ai-agent |
| 2025-10-10 14:10:00 | Status Change | Proposed | Agreed | Task approved and starting implementation | ai-agent |
| 2025-10-10 14:15:00 | Status Change | Agreed | InProgress | Creating navigation configuration | ai-agent |
| 2025-10-10 14:45:00 | Status Change | InProgress | Review | Implementation complete; build successful | ai-agent |
| 2025-10-10 15:00:00 | Enhancement | Review | Review | Added localStorage persistence for navigation state | ai-agent |
| 2025-10-10 15:10:00 | Refactor | Review | Review | Refactored to use Zustand store with persist middleware | ai-agent |
| 2025-10-10 15:30:00 | Status Change | Review | Done | Task approved and marked complete | ai-agent |

## Requirements
- Create sidebar navigation component with hierarchical structure
- Support collapsible sections for organizing documentation categories
- Show active page highlighting
- Add breadcrumbs at top of content area
- Create navigation configuration/data structure defining doc hierarchy
- Responsive behavior: collapsible on mobile, persistent on desktop
- Smooth scrolling to sections within pages
- Optional: Add "On this page" table of contents for current document

## Implementation Plan
- Create `DocsSidebar` component with:
  - Collapsible section groups
  - Navigation links with active state
  - Responsive toggle button for mobile
- Create navigation configuration file (`docsNavigation.ts`) defining structure:
  ```typescript
  {
    sections: [
      {
        title: "Getting Started",
        pages: [
          { title: "Introduction", path: "/docs" },
          { title: "Quick Start", path: "/docs/getting-started/quick-start" }
        ]
      },
      // ... more sections
    ]
  }
  ```
- Add breadcrumbs component to show current location
- Integrate sidebar into `DocsLayout` from task 20-1
- Add mobile menu toggle functionality
- Optional: Create `TableOfContents` component for in-page navigation

## Test Plan
### Objective
Verify navigation sidebar works correctly and provides smooth browsing experience.

### Test Scope
- Navigation rendering and structure
- Collapsible section behavior
- Active state highlighting
- Responsive behavior
- Breadcrumb functionality

### Key Test Scenarios
1. Verify all documentation sections and pages appear in navigation
2. Test collapsible sections expand/collapse correctly
3. Verify active page is highlighted correctly
4. Test navigation on mobile (collapsible behavior)
5. Verify breadcrumbs update based on current page
6. Test keyboard navigation
7. Verify smooth scrolling to sections

### Success Criteria
- Navigation displays complete documentation hierarchy
- Active page is visually highlighted
- Collapsible sections work smoothly
- Mobile navigation is usable
- Breadcrumbs accurately reflect current location

## Verification
- Sidebar displays all documentation sections
- Navigation links work and highlight active page
- Collapsible sections function properly
- Responsive behavior works on mobile and desktop
- Breadcrumbs update correctly when navigating

## Files Modified
- New: `web/src/components/docs/DocsSidebar.tsx` - Collapsible sidebar navigation with active page highlighting
- New: `web/src/components/docs/Breadcrumbs.tsx` - Breadcrumb navigation showing current location
- New: `web/src/config/docsNavigation.ts` - Documentation structure configuration
- New: `web/src/store/docs.ts` - Zustand store with persistence for navigation state
- Updated: `web/src/app/docs/layout.tsx` - Integrated sidebar and breadcrumbs

## Implementation Notes
- Created navigation configuration structure with 7 main sections and 60+ pages organized hierarchically
- Built DocsSidebar component with:
  - Collapsible sections using chevron icons (ChevronRight/ChevronDown)
  - Active page highlighting with primary color
  - Active section indication
  - Smooth hover states
  - Sticky positioning with scroll overflow
  - All sections open by default for easier browsing
  - Left border indicator for nested pages
- Built Breadcrumbs component with:
  - Automatic breadcrumb generation from URL path
  - Fallback to URL-based breadcrumbs if page not in navigation
  - ChevronRight separators
  - Link to parent sections
  - Current page highlighted
- Integrated both components into DocsLayout:
  - Sidebar fixed at 256px width, hidden on mobile (lg:block)
  - Sticky sidebar with max-height and scroll
  - Breadcrumbs above main content
  - Responsive gap-8 spacing
- Navigation structure organized into logical sections:
  - Getting Started (5 pages)
  - Features (4 overview pages)
  - Railway Integration (7 detailed pages)
  - Environments (8 detailed pages)
  - Dashboard (6 pages)
  - How-To Guides (10 practical guides)
  - Troubleshooting (9 pages)
- Build completed successfully; /docs route now at 221 kB (slight increase for navigation)
- All styling consistent with app design system
- **Enhancement: State Management with Zustand**:
  - Created dedicated docs store (`web/src/store/docs.ts`) using Zustand with persist middleware
  - Follows same pattern as existing stores (dashboard, wizard, ui)
  - Navigation state (open/closed sections) automatically persists to localStorage
  - Initial state: Only the section containing current page is open
  - Store provides clean API: `toggleSection`, `isOpen`, `setOpenSections`
  - User preferences automatically synchronized across browser tabs
  - Type-safe state management with TypeScript

