# [17-16] Implement Railway token API endpoints

[Back to task list](./tasks.md)

## Description

Create REST API endpoints for Railway token management: store/update, status check, validation, deletion, and rotation operations.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-10-09 00:00:00 | Created | N/A | Proposed | Task file created | AI Agent |

## Requirements

1. Create SecretsController with Vault dependency
2. Implement `POST /api/v1/secrets/railway` - Store/update token
3. Implement `GET /api/v1/secrets/railway/status` - Check configuration status
4. Implement `POST /api/v1/secrets/railway/validate` - Test token validity
5. Implement `DELETE /api/v1/secrets/railway` - Delete token
6. Implement `POST /api/v1/secrets/railway/rotate` - Rotate to new token
7. Add request validation and error handling
8. Register routes with authentication middleware

## Implementation Plan

1. Create `api/internal/controller/secrets.go`
2. Implement SecretsController struct with Vault dependency
3. Implement each endpoint method
4. Add request/response types
5. Validate Railway token before storing (test Railway API)
6. Register routes in server.go
7. Add comprehensive logging

## Test Plan

**Success Criteria**:
- Store validates and stores Railway token
- Status returns accurate configuration state
- Validate tests token with Railway API
- Delete removes token
- Rotate creates new version
- All endpoints require authentication
- Clear error messages returned

## Verification

- [ ] SecretsController created
- [ ] All Railway token endpoints implemented
- [ ] Request/response types defined
- [ ] Token validation on store
- [ ] Routes registered with auth
- [ ] Code compiles successfully

## Files Modified

- `api/internal/controller/secrets.go` (new)
- `api/internal/server/server.go` (updated)

